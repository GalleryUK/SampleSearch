#include "SampleSearch.h"#include "Globals.h"/* CODE EXAMPLE #1 *//* * Printing a text file * This is a very simple demonstration that shows how to use the * Print Manager to print a text file. */// Assumes inclusion of <MacHeaders>#include <Printing.h>#include <stdio.h>/*#include <pascal.h>*/#include <stdlib.h>/* Do you want to prompt for the page setup? */Boolean	DoPageSetUp  = TRUE;/* Globals */FILE *aRandomFile;/* Prototypes */void Init(void);Boolean DoneDrawingPagesOfATextFile(FILE *someFile);void PrintStuff(void);FILE *GotATextFile(void);short countPage = 0;short count = 0;void concatStrings(StringPtr sourceA,StringPtr sourceB,Str255 theSeperator);void makeStr255(Str255 theString, StringPtr thePtr);Boolean DoneDrawingPagesOfATextFile(FILE *someFile){	short	i;	Str255	aStringOfText,tempStr;	div_t theDiv, theDiv2;	short theHoriz;	short theVert;		TextSize(7);	TextFont(geneva);		makeStr255("\pPage",tempStr);	NumToString ((long)countPage+1L,aStringOfText);	concatStrings (tempStr,aStringOfText,"\p ");	MoveTo(250, 775);	DrawString(tempStr);	countPage++;	for (i = 1; i <= 216; ++i) 	{			if (count >= totfindcounter)					return TRUE;						BlockMove ((*therealResults)[count].name,aStringOfText,64);			theDiv = div(count,4);			theDiv2 = div(theDiv.quot,54);			theHoriz = theDiv.rem * 140;			theVert = theDiv2.rem * 14;			MoveTo(8 + theHoriz, 10 + theVert);			DrawString(aStringOfText);			count++;	}	return FALSE;}Boolean xDoneDrawingPagesOfATextFile(FILE *someFile);Boolean xDoneDrawingPagesOfATextFile(FILE *someFile){	short	i;	Str255	theString;	TextSize(12);	TextFont(courier);		MoveTo(475,113);	NumToString ((long)count,theString);	if (*theString == 1)	{		*(theString+3L) = *(theString+1L);		*(theString+2L) = '0';		*(theString+1L) = '0';		*(theString) = 3;	}	if (*theString == 2)	{		*(theString+3L) = *(theString+2L);		*(theString+2L) = *(theString+1L);		*(theString+1L) = '0';		*(theString) = 3;	}	DrawString(theString);	count ++;		if (count == 261)				return TRUE;	else		return FALSE;}void PrintStuff(void){	GrafPtr	savedPort;	TPrStatus	prStatus;	TPPrPort	printPort;	THPrint	hPrint;	Boolean	ok;		countPage = 0;		count = 0;	GetPort(&savedPort);	PrOpen();	hPrint = (THPrint)NewHandle(sizeof(TPrint));/* *not* sizeof(THPrint) */	PrintDefault(hPrint);	if (DoPageSetUp)			ok = PrStlDialog(hPrint);	else			ok = PrValidate(hPrint);	ok = PrJobDialog(hPrint);	if (ok)	{			printPort = PrOpenDoc(hPrint, nil, nil);			SetPort(&printPort->gPort);			PrOpenPage(printPort, nil);			/*			 * Now draw a single page.  You decide how many pages are drawn, and			 * what is drawn in each page.  QuickDraw commands are automatically			 * translated into commands to the printer. You could draw multiple pages			 * like this.			 */			while (!DoneDrawingPagesOfATextFile(aRandomFile)) {					PrClosePage(printPort);	/* Close the currently open page. */					PrOpenPage(printPort, nil);	/* and open a new one. */			}			PrClosePage(printPort);			PrCloseDoc(printPort);			/* Print spooled document, if any. */			if ((**hPrint).prJob.bJDocLoop == bSpoolLoop && PrError() ==					noErr)					PrPicFile(hPrint, nil, nil, nil, &prStatus);	}	else {			/* You will want to add error handling here... */			SysBeep(5);	}	PrClose();	SetPort(savedPort);}/* Open any text file */FILE * GotATextFile(void){	SFReply	theReply;	SFTypeList	theTypeList = {'TEXT'};	Point 	where = {40, 60};	OSErr	PotentialErr;	FILE	*someFile;	SFGetFile(where, "\p", nil, 1, theTypeList, nil, &theReply);	if (theReply.good) {			PotentialErr  = SetVol(nil, theReply.vRefNum);			someFile = fopen(PtoCstr((unsigned char *)theReply.fName), "r");			return someFile;	}	return nil;}void mainPrint(void);void mainPrint(void){	//Init();	/*if (aRandomFile = GotATextFile()) {*/	PrintStuff();		/*	fclose(aRandomFile);	}*/}