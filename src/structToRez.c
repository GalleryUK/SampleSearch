#include "structToRez.h"OSErr loadStructureFromResource(FSSpec theFile,Ptr theStructure,long structSize,OSType theResType,short theResID){	long prefDirID;	short prefRefNum;	FSSpec prefFile;	short iRefNum,rfRefNum;	Handle thePData;	OSErr		iErr;		iRefNum = CurResFile();		rfRefNum = FSpOpenResFile(&theFile,fsRdPerm);	if (rfRefNum == -1)	{		return -1;	}		UseResFile(rfRefNum);		thePData = GetResource(theResType,theResID);	if (thePData)	{		BlockMove(*thePData,theStructure,structSize);		CloseResFile(rfRefNum);		UseResFile(iRefNum);		return 0;	}	else	{		CloseResFile(rfRefNum);		UseResFile(iRefNum);		return -1;	}}OSErr saveStructureAsResource(FSSpec theFile,Ptr theStructure,long structSize,OSType theResType,short theResID, Boolean makeOne, OSType fileType){	long prefDirID;	short prefRefNum;	FSSpec prefFile;	short iRefNum,rfRefNum;	Handle thePData;	OSErr		iErr;		iRefNum = CurResFile();			rfRefNum = FSpOpenResFile(&theFile,fsWrPerm);	if (rfRefNum == -1)	{		if (makeOne)		{			FSpCreateResFile(&theFile,'MgAl',fileType,0);			rfRefNum = FSpOpenResFile(&theFile,fsWrPerm);			if (rfRefNum == -1)			{				return -1;			}		}		else		{			return -1;		}	}		UseResFile(rfRefNum);	thePData = GetResource(theResType,theResID);	if (thePData)	{		RmveResource(thePData);		DisposHandle(thePData);		UpdateResFile(rfRefNum);	}			iErr = PtrToHand(theStructure,&thePData,structSize);	AddResource(thePData,theResType,theResID,"\pStructToRez");			WriteResource(thePData);	CloseResFile(rfRefNum);	UseResFile(iRefNum);	return 0;}